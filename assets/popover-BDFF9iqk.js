import{o as u,A as G,t as be,u as j,i as K,c as ge,l as he,a as V,b as B,N as oe}from"./keyboard-8GUJJcYw.js";import{w as R,a as F,r as S,h as T,d as O,p as D,i as A,b as ee,f as we,e as Q,J as ye,K as Se,L as Ee,s as $e,F as X}from"./index-D6snvThe.js";import{c as te,w as re,h as ue,i as H,u as U,f as W,E as le,P as M,T as Y,N}from"./hidden-B8kqh8Fv.js";function Te(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Fe(){return/Android/gi.test(window.navigator.userAgent)}function Ie(){return Te()||Fe()}function J(t,o,s){te.isServer||R(i=>{document.addEventListener(t,o,s),i(()=>document.removeEventListener(t,o,s))})}function se(t,o,s){te.isServer||R(i=>{window.addEventListener(t,o,s),i(()=>window.removeEventListener(t,o,s))})}function xe(t,o,s=F(()=>!0)){function i(n,l){if(!s.value||n.defaultPrevented)return;let e=l(n);if(e===null||!e.getRootNode().contains(e))return;let w=function m(r){return typeof r=="function"?m(r()):Array.isArray(r)||r instanceof Set?r:[r]}(t);for(let m of w){if(m===null)continue;let r=m instanceof HTMLElement?m:u(m);if(r!=null&&r.contains(e)||n.composed&&n.composedPath().includes(r))return}return!re(e,ue.Loose)&&e.tabIndex!==-1&&n.preventDefault(),o(n,e)}let c=S(null);J("pointerdown",n=>{var l,e;s.value&&(c.value=((e=(l=n.composedPath)==null?void 0:l.call(n))==null?void 0:e[0])||n.target)},!0),J("mousedown",n=>{var l,e;s.value&&(c.value=((e=(l=n.composedPath)==null?void 0:l.call(n))==null?void 0:e[0])||n.target)},!0),J("click",n=>{Ie()||c.value&&(i(n,()=>c.value),c.value=null)},!0),J("touchend",n=>i(n,()=>n.target instanceof HTMLElement?n.target:null),!0),se("blur",n=>i(n,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ke(t,o,s,i){te.isServer||R(c=>{t=t??window,t.addEventListener(o,s,i),c(()=>t.removeEventListener(o,s,i))})}var C=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(C||{});function ie(){let t=S(0);return se("keydown",o=>{o.key==="Tab"&&(t.value=o.shiftKey?1:0)}),t}function Ce({defaultContainers:t=[],portals:o,mainTreeNodeRef:s}={}){let i=S(null),c=H(i);function n(){var l,e,w;let m=[];for(let r of t)r!==null&&(r instanceof HTMLElement?m.push(r):"value"in r&&r.value instanceof HTMLElement&&m.push(r.value));if(o!=null&&o.value)for(let r of o.value)m.push(r);for(let r of(l=c==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?l:[])r!==document.body&&r!==document.head&&r instanceof HTMLElement&&r.id!=="headlessui-portal-root"&&(r.contains(u(i))||r.contains((w=(e=u(i))==null?void 0:e.getRootNode())==null?void 0:w.host)||m.some(b=>r.contains(b))||m.push(r));return m}return{resolveContainers:n,contains(l){return n().some(e=>e.contains(l))},mainTreeNodeRef:i,MainTreeNode(){return s!=null?null:T(W,{features:U.Hidden,ref:i})}}}function Le(){let t=S(null);return{mainTreeNodeRef:t,MainTreeNode(){return T(W,{features:U.Hidden,ref:t})}}}let ve=Symbol("ForcePortalRootContext");function Ne(){return A(ve,!1)}let Ke=O({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(t,{slots:o,attrs:s}){return D(ve,t.force),()=>{let{force:i,...c}=t;return G({theirProps:c,ourProps:{},slot:{},slots:o,attrs:s,name:"ForcePortalRoot"})}}});function Oe(t){let o=H(t);if(!o){if(t===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${t}`)}let s=o.getElementById("headlessui-portal-root");if(s)return s;let i=o.createElement("div");return i.setAttribute("id","headlessui-portal-root"),o.body.appendChild(i)}const Z=new WeakMap;function Be(t){var o;return(o=Z.get(t))!=null?o:0}function ae(t,o){let s=o(Be(t));return s<=0?Z.delete(t):Z.set(t,s),s}let Ue=O({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:o,attrs:s}){let i=S(null),c=F(()=>H(i)),n=Ne(),l=A(pe,null),e=S(n===!0||l==null?Oe(i.value):l.resolveTarget());e.value&&ae(e.value,d=>d+1);let w=S(!1);ee(()=>{w.value=!0}),R(()=>{n||l!=null&&(e.value=l.resolveTarget())});let m=A(_,null),r=!1,b=Ee();return we(i,()=>{if(r||!m)return;let d=u(i);d&&(Q(m.register(d),b),r=!0)}),Q(()=>{var d,f;let $=(d=c.value)==null?void 0:d.getElementById("headlessui-portal-root");!$||e.value!==$||ae(e.value,E=>E-1)||e.value.children.length>0||(f=e.value.parentElement)==null||f.removeChild(e.value)}),()=>{if(!w.value||e.value===null)return null;let d={ref:i,"data-headlessui-portal":""};return T(ye,{to:e.value},G({ourProps:d,theirProps:t,slot:{},attrs:s,slots:o,name:"Portal"}))}}}),_=Symbol("PortalParentContext");function Me(){let t=A(_,null),o=S([]);function s(n){return o.value.push(n),t&&t.register(n),()=>i(n)}function i(n){let l=o.value.indexOf(n);l!==-1&&o.value.splice(l,1),t&&t.unregister(n)}let c={register:s,unregister:i,portals:o};return[o,O({name:"PortalWrapper",setup(n,{slots:l}){return D(_,c),()=>{var e;return(e=l.default)==null?void 0:e.call(l)}}})]}let pe=Symbol("PortalGroupContext"),We=O({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:o,slots:s}){let i=Se({resolveTarget(){return t.target}});return D(pe,i),()=>{let{target:c,...n}=t;return G({theirProps:n,ourProps:{},slot:{},attrs:o,slots:s,name:"PortalGroup"})}}});var Ae=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ae||{});let ce=Symbol("PopoverContext");function ne(t){let o=A(ce,null);if(o===null){let s=new Error(`<${t} /> is missing a parent <${Re.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ne),s}return o}let de=Symbol("PopoverGroupContext");function fe(){return A(de,null)}let me=Symbol("PopoverPanelContext");function Ge(){return A(me,null)}let Re=O({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:o,attrs:s,expose:i}){var c;let n=S(null);i({el:n,$el:n});let l=S(1),e=S(null),w=S(null),m=S(null),r=S(null),b=F(()=>H(n)),d=F(()=>{var a,p;if(!u(e)||!u(r))return!1;for(let z of document.querySelectorAll("body > *"))if(Number(z==null?void 0:z.contains(u(e)))^Number(z==null?void 0:z.contains(u(r))))return!0;let v=le(),y=v.indexOf(u(e)),k=(y+v.length-1)%v.length,L=(y+1)%v.length,q=v[k],Pe=v[L];return!((a=u(r))!=null&&a.contains(q))&&!((p=u(r))!=null&&p.contains(Pe))}),f={popoverState:l,buttonId:S(null),panelId:S(null),panel:r,button:e,isPortalled:d,beforePanelSentinel:w,afterPanelSentinel:m,togglePopover(){l.value=j(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(a){f.closePopover();let p=a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?u(a):u(f.button):u(f.button);p==null||p.focus()}};D(ce,f),be(F(()=>j(l.value,{0:V.Open,1:V.Closed})));let $={buttonId:f.buttonId,panelId:f.panelId,close(){f.closePopover()}},E=fe(),I=E==null?void 0:E.registerPopover,[x,g]=Me(),h=Ce({mainTreeNodeRef:E==null?void 0:E.mainTreeNodeRef,portals:x,defaultContainers:[e,r]});function P(){var a,p,v,y;return(y=E==null?void 0:E.isFocusWithinPopoverGroup())!=null?y:((a=b.value)==null?void 0:a.activeElement)&&(((p=u(e))==null?void 0:p.contains(b.value.activeElement))||((v=u(r))==null?void 0:v.contains(b.value.activeElement)))}return R(()=>I==null?void 0:I($)),ke((c=b.value)==null?void 0:c.defaultView,"focus",a=>{var p,v;a.target!==window&&a.target instanceof HTMLElement&&l.value===0&&(P()||e&&r&&(h.contains(a.target)||(p=u(f.beforePanelSentinel))!=null&&p.contains(a.target)||(v=u(f.afterPanelSentinel))!=null&&v.contains(a.target)||f.closePopover()))},!0),xe(h.resolveContainers,(a,p)=>{var v;f.closePopover(),re(p,ue.Loose)||(a.preventDefault(),(v=u(e))==null||v.focus())},F(()=>l.value===0)),()=>{let a={open:l.value===0,close:f.close};return T(X,[T(g,{},()=>G({theirProps:{...t,...s},ourProps:{ref:n},slot:a,slots:o,attrs:s,name:"Popover"})),T(h.MainTreeNode)])}}}),qe=O({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{attrs:o,slots:s,expose:i}){var c;let n=(c=t.id)!=null?c:`headlessui-popover-button-${K()}`,l=ne("PopoverButton"),e=F(()=>H(l.button));i({el:l.button,$el:l.button}),ee(()=>{l.buttonId.value=n}),Q(()=>{l.buttonId.value=null});let w=fe(),m=w==null?void 0:w.closeOthers,r=Ge(),b=F(()=>r===null?!1:r.value===l.panelId.value),d=S(null),f=`headlessui-focus-sentinel-${K()}`;b.value||R(()=>{l.button.value=u(d)});let $=ge(F(()=>({as:t.as,type:o.type})),d);function E(a){var p,v,y,k,L;if(b.value){if(l.popoverState.value===1)return;switch(a.key){case B.Space:case B.Enter:a.preventDefault(),(v=(p=a.target).click)==null||v.call(p),l.closePopover(),(y=u(l.button))==null||y.focus();break}}else switch(a.key){case B.Space:case B.Enter:a.preventDefault(),a.stopPropagation(),l.popoverState.value===1&&(m==null||m(l.buttonId.value)),l.togglePopover();break;case B.Escape:if(l.popoverState.value!==0)return m==null?void 0:m(l.buttonId.value);if(!u(l.button)||(k=e.value)!=null&&k.activeElement&&!((L=u(l.button))!=null&&L.contains(e.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),l.closePopover();break}}function I(a){b.value||a.key===B.Space&&a.preventDefault()}function x(a){var p,v;t.disabled||(b.value?(l.closePopover(),(p=u(l.button))==null||p.focus()):(a.preventDefault(),a.stopPropagation(),l.popoverState.value===1&&(m==null||m(l.buttonId.value)),l.togglePopover(),(v=u(l.button))==null||v.focus()))}function g(a){a.preventDefault(),a.stopPropagation()}let h=ie();function P(){let a=u(l.panel);if(!a)return;function p(){j(h.value,{[C.Forwards]:()=>M(a,N.First),[C.Backwards]:()=>M(a,N.Last)})===Y.Error&&M(le().filter(v=>v.dataset.headlessuiFocusGuard!=="true"),j(h.value,{[C.Forwards]:N.Next,[C.Backwards]:N.Previous}),{relativeTo:u(l.button)})}p()}return()=>{let a=l.popoverState.value===0,p={open:a},{...v}=t,y=b.value?{ref:d,type:$.value,onKeydown:E,onClick:x}:{ref:d,id:n,type:$.value,"aria-expanded":l.popoverState.value===0,"aria-controls":u(l.panel)?l.panelId.value:void 0,disabled:t.disabled?!0:void 0,onKeydown:E,onKeyup:I,onClick:x,onMousedown:g};return T(X,[G({ourProps:y,theirProps:{...o,...v},slot:p,attrs:o,slots:s,name:"PopoverButton"}),a&&!b.value&&l.isPortalled.value&&T(W,{id:f,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:P})])}}}),ze=O({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{attrs:o,slots:s,expose:i}){var c;let n=(c=t.id)!=null?c:`headlessui-popover-panel-${K()}`,{focus:l}=t,e=ne("PopoverPanel"),w=F(()=>H(e.panel)),m=`headlessui-focus-sentinel-before-${K()}`,r=`headlessui-focus-sentinel-after-${K()}`;i({el:e.panel,$el:e.panel}),ee(()=>{e.panelId.value=n}),Q(()=>{e.panelId.value=null}),D(me,e.panelId),R(()=>{var g,h;if(!l||e.popoverState.value!==0||!e.panel)return;let P=(g=w.value)==null?void 0:g.activeElement;(h=u(e.panel))!=null&&h.contains(P)||M(u(e.panel),N.First)});let b=he(),d=F(()=>b!==null?(b.value&V.Open)===V.Open:e.popoverState.value===0);function f(g){var h,P;switch(g.key){case B.Escape:if(e.popoverState.value!==0||!u(e.panel)||w.value&&!((h=u(e.panel))!=null&&h.contains(w.value.activeElement)))return;g.preventDefault(),g.stopPropagation(),e.closePopover(),(P=u(e.button))==null||P.focus();break}}function $(g){var h,P,a,p,v;let y=g.relatedTarget;y&&u(e.panel)&&((h=u(e.panel))!=null&&h.contains(y)||(e.closePopover(),((a=(P=u(e.beforePanelSentinel))==null?void 0:P.contains)!=null&&a.call(P,y)||(v=(p=u(e.afterPanelSentinel))==null?void 0:p.contains)!=null&&v.call(p,y))&&y.focus({preventScroll:!0})))}let E=ie();function I(){let g=u(e.panel);if(!g)return;function h(){j(E.value,{[C.Forwards]:()=>{var P;M(g,N.First)===Y.Error&&((P=u(e.afterPanelSentinel))==null||P.focus())},[C.Backwards]:()=>{var P;(P=u(e.button))==null||P.focus({preventScroll:!0})}})}h()}function x(){let g=u(e.panel);if(!g)return;function h(){j(E.value,{[C.Forwards]:()=>{let P=u(e.button),a=u(e.panel);if(!P)return;let p=le(),v=p.indexOf(P),y=p.slice(0,v+1),k=[...p.slice(v+1),...y];for(let L of k.slice())if(L.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(L)){let q=k.indexOf(L);q!==-1&&k.splice(q,1)}M(k,N.First,{sorted:!1})},[C.Backwards]:()=>{var P;M(g,N.Previous)===Y.Error&&((P=u(e.button))==null||P.focus())}})}h()}return()=>{let g={open:e.popoverState.value===0,close:e.close},{focus:h,...P}=t,a={ref:e.panel,id:n,onKeydown:f,onFocusout:l&&e.popoverState.value===0?$:void 0,tabIndex:-1};return G({ourProps:a,theirProps:{...o,...P},attrs:o,slot:g,slots:{...s,default:(...p)=>{var v;return[T(X,[d.value&&e.isPortalled.value&&T(W,{id:m,ref:e.beforePanelSentinel,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:I}),(v=s.default)==null?void 0:v.call(s,...p),d.value&&e.isPortalled.value&&T(W,{id:r,ref:e.afterPanelSentinel,features:U.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:x})])]}},features:oe.RenderStrategy|oe.Static,visible:d.value,name:"PopoverPanel"})}}}),Je=O({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:o,slots:s,expose:i}){let c=S(null),n=$e([]),l=F(()=>H(c)),e=Le();i({el:c,$el:c});function w(d){let f=n.value.indexOf(d);f!==-1&&n.value.splice(f,1)}function m(d){return n.value.push(d),()=>{w(d)}}function r(){var d;let f=l.value;if(!f)return!1;let $=f.activeElement;return(d=u(c))!=null&&d.contains($)?!0:n.value.some(E=>{var I,x;return((I=f.getElementById(E.buttonId.value))==null?void 0:I.contains($))||((x=f.getElementById(E.panelId.value))==null?void 0:x.contains($))})}function b(d){for(let f of n.value)f.buttonId.value!==d&&f.close()}return D(de,{registerPopover:m,unregisterPopover:w,isFocusWithinPopoverGroup:r,closeOthers:b,mainTreeNodeRef:e.mainTreeNodeRef}),()=>T(X,[G({ourProps:{ref:c},theirProps:{...t,...o},slot:{},attrs:o,slots:s,name:"PopoverGroup"}),T(e.MainTreeNode)])}});export{Ue as $,Je as A,ke as E,qe as G,Ce as N,C as d,ze as j,ie as n,Me as q,Te as t,Ke as u,xe as w,Re as y,We as z};
